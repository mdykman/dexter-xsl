/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.4/userguide/tutorial_java_projects.html
 */

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'application'

repositories {
    jcenter()
}
mainClassName = 'org.dykman.dexter.Main'
dependencies {
// https://mvnrepository.com/artifact/net.sf.jtidy/jtidy
compile group: 'net.sf.jtidy', name: 'jtidy', version: 'r938'
// https://mvnrepository.com/artifact/xerces/xerces
// compile group: 'xerces', name: 'xerces', version: '2.4.0'
// https://mvnrepository.com/artifact/gnu.getopt/java-getopt
compile group: 'gnu.getopt', name: 'java-getopt', version: '1.0.13'
// https://mvnrepository.com/artifact/xml-apis/xml-apis
compile group: 'xml-apis', name: 'xml-apis', version: '2.0.2'
//compile group: 'xml-apis', name: 'xml-apis', version: '1.4.01'
// https://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE
compile group: 'net.sf.saxon', name: 'Saxon-HE', version: '9.8.0-8'

}

task fatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': mainClassName,
		  	'Author': 'Michael Dykman<mdykman@gmail.com>',
			'Application': 'Dexter, a generator for XSL 1.0'
    }
//    baseName = 'dexter-xsl'
//    baseName = 'dexter'
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
	  exclude 'META-INF/*.RSA', 'META-INF/*SF','META-INF/*.SF','META-INF/*.DSA' 
    with jar
}


build.dependsOn fatJar
